<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>posnk kernel: fs_device_operations Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">posnk kernel
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="https://github.com/peterbjornx/posnk"><span>GitHub&#160;Project</span></a></li>
      <li><a href="downloads.html"><span>Downloads</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">fs_device_operations Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains callbacks for all filesystem driver functions.  
 <a href="structfs__device__operations.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="vfs_8h_source.html">vfs.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a859e0dca40c89da73ff42b6dcd2590e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a859e0dca40c89da73ff42b6dcd2590e8">load_inode</a> )(<a class="el" href="vfs_8h.html#a616bc6ee0262218ac3507c48556a1e6f">fs_device_t</a> *, <a class="el" href="types_8h.html#ab61b14ba26feb6e4f530bd8ae521e2c9">ino_t</a>)</td></tr>
<tr class="memdesc:a859e0dca40c89da73ff42b6dcd2590e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load an inode from storage.  <a href="#a859e0dca40c89da73ff42b6dcd2590e8"></a><br/></td></tr>
<tr class="memitem:aa921fa21d60b142dfa5aabc9c33f2a55"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#aa921fa21d60b142dfa5aabc9c33f2a55">store_inode</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *)</td></tr>
<tr class="memdesc:aa921fa21d60b142dfa5aabc9c33f2a55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an inode to storage.  <a href="#aa921fa21d60b142dfa5aabc9c33f2a55"></a><br/></td></tr>
<tr class="memitem:a8c7f28d85d5ac54f635113967e71f067"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a8c7f28d85d5ac54f635113967e71f067">mknod</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *)</td></tr>
<tr class="memdesc:a8c7f28d85d5ac54f635113967e71f067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an inode.  <a href="#a8c7f28d85d5ac54f635113967e71f067"></a><br/></td></tr>
<tr class="memitem:a9cbd5e2a0db28dcf339086e1566374e5"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a9cbd5e2a0db28dcf339086e1566374e5">rmnod</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *)</td></tr>
<tr class="memdesc:a9cbd5e2a0db28dcf339086e1566374e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete an inode.  <a href="#a9cbd5e2a0db28dcf339086e1566374e5"></a><br/></td></tr>
<tr class="memitem:a4dd80b922d605172b8623ac84f569553"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a4dd80b922d605172b8623ac84f569553">read_inode</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, void *, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a> *)</td></tr>
<tr class="memdesc:a4dd80b922d605172b8623ac84f569553"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from a file.  <a href="#a4dd80b922d605172b8623ac84f569553"></a><br/></td></tr>
<tr class="memitem:adfcac011fedb648f3b5c4381158d3d1a"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#adfcac011fedb648f3b5c4381158d3d1a">write_inode</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, void *, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a> *)</td></tr>
<tr class="memdesc:adfcac011fedb648f3b5c4381158d3d1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to a file.  <a href="#adfcac011fedb648f3b5c4381158d3d1a"></a><br/></td></tr>
<tr class="memitem:a8504a31b472b314e7faae832cc2e9aa8"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a8504a31b472b314e7faae832cc2e9aa8">read_dir</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, void *, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a> *)</td></tr>
<tr class="memdesc:a8504a31b472b314e7faae832cc2e9aa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read directory entries from backing storage.  <a href="#a8504a31b472b314e7faae832cc2e9aa8"></a><br/></td></tr>
<tr class="memitem:a602f09647f044cf9b5cb910aa5fbfc23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vfs_8h.html#a6673e8f64ca9ebd7e26e6289dca06e87">dirent_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a602f09647f044cf9b5cb910aa5fbfc23">find_dirent</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, char *)</td></tr>
<tr class="memdesc:a602f09647f044cf9b5cb910aa5fbfc23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a directory entry.  <a href="#a602f09647f044cf9b5cb910aa5fbfc23"></a><br/></td></tr>
<tr class="memitem:a2129be966222186020c9538dd12df607"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a2129be966222186020c9538dd12df607">mkdir</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *)</td></tr>
<tr class="memdesc:a2129be966222186020c9538dd12df607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create directory structures.  <a href="#a2129be966222186020c9538dd12df607"></a><br/></td></tr>
<tr class="memitem:a063d2ae50d3a2e8c9b18222dab4a9266"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a063d2ae50d3a2e8c9b18222dab4a9266">link</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, char *, <a class="el" href="types_8h.html#ab61b14ba26feb6e4f530bd8ae521e2c9">ino_t</a>)</td></tr>
<tr class="memdesc:a063d2ae50d3a2e8c9b18222dab4a9266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a directory entry.  <a href="#a063d2ae50d3a2e8c9b18222dab4a9266"></a><br/></td></tr>
<tr class="memitem:a5d071dd0da44141d13773ffd640a01f2"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a5d071dd0da44141d13773ffd640a01f2">unlink</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, char *)</td></tr>
<tr class="memdesc:a5d071dd0da44141d13773ffd640a01f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a directory entry.  <a href="#a5d071dd0da44141d13773ffd640a01f2"></a><br/></td></tr>
<tr class="memitem:a4a8dbf701e3a36ebfab70418e222d974"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__device__operations.html#a4a8dbf701e3a36ebfab70418e222d974">trunc_inode</a> )(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>)</td></tr>
<tr class="memdesc:a4a8dbf701e3a36ebfab70418e222d974"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resize a file.  <a href="#a4a8dbf701e3a36ebfab70418e222d974"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Contains callbacks for all filesystem driver functions. </p>
<p>This is the structure used to pass the callbacks for a filesystem driver to the kernel, it is referenced by <a class="el" href="structfs__device.html" title="An instance of a filesystem driver.">fs_device</a>, which describes an instance of a filesystem driver, implementation hints and requirements are given in the description of each callback, for more info on FS driver implementation see <a class="el" href="structfs__device.html" title="An instance of a filesystem driver.">fs_device</a> </p>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00104">104</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>
</div><h2>Field Documentation</h2>
<a class="anchor" id="a602f09647f044cf9b5cb910aa5fbfc23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vfs_8h.html#a6673e8f64ca9ebd7e26e6289dca06e87">dirent_t</a>*(* fs_device_operations::find_dirent)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, char *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a directory entry. </p>
<p>REQUIRED </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The directory to search </td></tr>
    <tr><td class="paramname">name</td><td>The filename to match </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The directory entry matching name from the directory inode, if none, NULL is returned </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00221">221</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00153">vfs_find_dirent()</a>.</p>

</div>
</div>
<a class="anchor" id="a063d2ae50d3a2e8c9b18222dab4a9266"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::link)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, char *, <a class="el" href="types_8h.html#ab61b14ba26feb6e4f530bd8ae521e2c9">ino_t</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a directory entry. </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function, except for the size field </dd>
<dd>
Implementations are required to update the directory size field</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode for the directory </td></tr>
    <tr><td class="paramname">name</td><td>The file name for the directory entry </td></tr>
    <tr><td class="paramname">nod_id</td><td>The inode id that the directory entry will point to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00250">250</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00237">vfs_int_link()</a>.</p>

</div>
</div>
<a class="anchor" id="a859e0dca40c89da73ff42b6dcd2590e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a>*(* fs_device_operations::load_inode)(<a class="el" href="vfs_8h.html#a616bc6ee0262218ac3507c48556a1e6f">fs_device_t</a> *, <a class="el" href="types_8h.html#ab61b14ba26feb6e4f530bd8ae521e2c9">ino_t</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load an inode from storage. </p>
<p>REQUIRED</p>
<p>Implementations of this function must fill ALL inode fields relevant to the file type, this includes instance fields such as lock </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode id to load </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The loaded inode </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00116">116</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, <a class="el" href="vfs_8c_source.html#l00090">vfs_get_inode()</a>, <a class="el" href="vfs_8c_source.html#l01508">vfs_initialize()</a>, and <a class="el" href="vfs_8c_source.html#l01173">vfs_mount()</a>.</p>

</div>
</div>
<a class="anchor" id="a2129be966222186020c9538dd12df607"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::mkdir)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create directory structures. </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function</dd></dl>
<p>Implementations are not required to implement this function but must provide a stub to allow directories to be created </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode for the new directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00234">234</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00213">vfs_int_mkdir()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c7f28d85d5ac54f635113967e71f067"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::mknod)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an inode. </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not depend on any fields in inode being valid</dd></dl>
<p>Implementations must fill inode-&gt;id </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode to create </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00139">139</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00169">vfs_int_mknod()</a>.</p>

</div>
</div>
<a class="anchor" id="a8504a31b472b314e7faae832cc2e9aa8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::read_dir)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, void *, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read directory entries from backing storage. </p>
<p>REQUIRED </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function </dd>
<dd>
Implementations must only return whole directory entries</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode for the directory </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer to store the entries in </td></tr>
    <tr><td class="paramname">file_offset</td><td>The offset in the directory to start reading at </td></tr>
    <tr><td class="paramname">count</td><td>The number of bytes to read </td></tr>
    <tr><td class="paramname">nread</td><td>A pointer to a variable in which the number of bytes read will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00207">207</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00287">vfs_int_read_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="a4dd80b922d605172b8623ac84f569553"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::read_inode)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, void *, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from a file. </p>
<p>REQUIRED </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The VFS will adjust count so that the whole requested area is in the file </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode for the file </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer to store the data in </td></tr>
    <tr><td class="paramname">file_offset</td><td>The offset in the file to start reading at </td></tr>
    <tr><td class="paramname">count</td><td>The number of bytes to read </td></tr>
    <tr><td class="paramname">nread</td><td>A pointer to a variable in which the number of bytes read will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00171">171</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00308">vfs_int_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a9cbd5e2a0db28dcf339086e1566374e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::rmnod)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete an inode. </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function</dd></dl>
<p>Implementations are recommended to free any data associated with the inode </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00152">152</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00191">vfs_int_rmnod()</a>.</p>

</div>
</div>
<a class="anchor" id="aa921fa21d60b142dfa5aabc9c33f2a55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::store_inode)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write an inode to storage. </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00127">127</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a8dbf701e3a36ebfab70418e222d974"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::trunc_inode)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resize a file. </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function Implementations must fill the newly created space with zeroes and free any truncated space</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode for the file </td></tr>
    <tr><td class="paramname">size</td><td>The new size of the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00276">276</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00352">vfs_int_truncate()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d071dd0da44141d13773ffd640a01f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::unlink)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, char *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a directory entry. </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function, except for the size field </dd>
<dd>
Implementations are required to update the directory size field</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>- The inode for the directory </td></tr>
    <tr><td class="paramname">name</td><td>- The file name of the directory entry to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00263">263</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00260">vfs_int_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="adfcac011fedb648f3b5c4381158d3d1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* fs_device_operations::write_inode)(<a class="el" href="vfs_8h.html#a2dd256afc91a2d7a99e2082e096664b2">inode_t</a> *, void *, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a>, <a class="el" href="types_8h.html#a2ecffc95171f097e4c966c8a29fbe038">aoff_t</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data to a file. </p>
<dl class="section warning"><dt>Warning</dt><dd>Implementations must not modify the inode metadata from this function</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The VFS layer will automatically adjust file size<br/>
 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inode</td><td>The inode for the file </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer containing the data to write </td></tr>
    <tr><td class="paramname">file_offset</td><td>The offset in the file to start writing at </td></tr>
    <tr><td class="paramname">count</td><td>The number of bytes to write </td></tr>
    <tr><td class="paramname">nwritten</td><td>A pointer to a variable in which the number of bytes written will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In case of error: a valid error code, Otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="vfs_8h_source.html#l00188">188</a> of file <a class="el" href="vfs_8h_source.html">vfs.h</a>.</p>

<p>Referenced by <a class="el" href="ramfs_8c_source.html#l00280">ramfs_create()</a>, and <a class="el" href="vfs_8c_source.html#l00329">vfs_int_write()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>include/kernel/<a class="el" href="vfs_8h_source.html">vfs.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jul 12 2014 05:53:25 for posnk kernel by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
